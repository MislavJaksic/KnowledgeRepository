## [JUnit test reports](https://docs.gitlab.com/ee/ci/junit_test_reports.html)

If the test fails the user gets notified and has to check the output logs.  
JUnit test reports display the report on the merge request.  

### How it works

GitLab Runner uploads JUnit XML files as artefacts.  
When merge is requested, head and base branch's JUnit test reports are compared.  

Results will appear in the merge request:
* newly failed tests
* existing failures
* resolved failures

### Setup

[Supported languages on JUnit tests](https://en.wikipedia.org/wiki/JUnit#Ports)

In ".gitlab-ci.yml" add:
```
Job-Name:
  stage: Stage-Name
  script:
  - ...  # run tests
  artifacts:
    paths:
    - ...  # to view the JUnit output files
    reports:
      junit: ...  # location of test reports generated by "script"
```

### Examples

#### Ruby

```
image: ?

## Use https://github.com/sj26/rspec_junit_formatter to generate a JUnit report with rspec
ruby:
  stage: test
  script:
  - bundle install
  - rspec spec/lib/ --format RspecJunitFormatter --out rspec.xml
  artifacts:
    paths:
      - rspec.xml
    reports:
      junit: rspec.xml
```

### Go

```
image: ?

## Use https://github.com/jstemmer/go-junit-report to generate a JUnit report with go
golang:
  stage: test
  script:
  - go get -u github.com/jstemmer/go-junit-report
  - go test -v 2>&1 | go-junit-report > report.xml
  artifacts:
    reports:
      junit: report.xml
```

#### Java Gradle

```
image: gradle:5.6.3

java:
  stage: test
  script:
  - gradle test
  artifacts:
    reports:
      junit: build/test-results/test/TEST-*.xml

# Note: if it doesen't work, try junit: build/test-results/test/**/TEST-*.xml
```

#### Java Maven (Surefire/Failsafe)

```
image: ?

java:
  stage: test
  script:
  - mvn verify
  artifacts:
    reports:
      junit:
        - target/surefire-reports/TEST-*.xml
        - target/failsafe-reports/TEST-*.xml
```

#### C/C++

```
image: ?

cpp:
  stage: test
  script:
  - gtest.exe --gtest_output="xml:report.xml"
  artifacts:
    reports:
      junit: report.xml
```
